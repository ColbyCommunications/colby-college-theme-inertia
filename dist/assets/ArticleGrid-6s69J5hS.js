import{h as x,c as r,o as i,b as p,d as L,F as v,k as d,a,r as C,s as E,e as P,f as J,g as S,p as K,t as A,u as D,i as V,w as R,T as F,v as Q,q as Y,m as Z}from"./app-CHaPO3vU.js";import{_ as O,a as U}from"./Context-CVUImxrf.js";const ee=["href","aria-label"],te={key:0},ae=["srcset"],se=["src","alt"],ie={key:1},ne=["srcset"],oe=["src","alt"],re={key:0},le=["srcset"],ce=["src","alt"],de={key:1},ue=["srcset"],ge=["src","alt"],fe={__name:"Article",props:{border:{type:[Boolean,String],default:!1},image:{type:Object,default:null},buttons:{type:Array,default:()=>[]},postType:{type:String,default:""},heading:{type:String,default:""},subheading:{type:String,default:""},paragraph:{type:String,default:""},size:{type:String,default:"small"},inComponentLibrary:{type:Boolean,default:!1}},setup(s){const t=s,W=x(()=>Array.isArray(t.buttons)&&t.buttons[0].button.url),c=x(()=>!!t.image.sizes.desktop||!!t.image.sizes.mobile),_=x(()=>(t.heading||"").replace(/<[^>]*>/g,"").replace(/"/g,"").toLowerCase());return(M,h)=>{var f,w,k,T;return i(),r("article",{class:d(["article space-y-4",{"pt-1 border-t-2 border-solid border-indigo-600":!!s.border}])},[s.image?(i(),r(v,{key:0},[W.value?(i(),r("a",{key:0,class:d(["article__image relative block overflow-hidden",{article__image__person:s.postType==="people"}]),href:s.buttons[0].button.url,"aria-label":_.value},[c.value?(i(),r("picture",te,[a("source",{media:"(min-width:768px)",srcset:s.image.sizes.desktop},null,8,ae),a("img",{class:"w-full object-cover hover:scale-105 transition-all duration-500 ease-in-out",src:s.image.sizes.mobile||s.image.src,alt:((f=s.image)==null?void 0:f.alt)||""},null,8,se)])):(i(),r("picture",ie,[a("source",{media:"(min-width:768px)",srcset:s.image.srcset},null,8,ne),a("img",{class:"w-full object-cover hover:scale-105 transition-all duration-500 ease-in-out",src:s.image.src,alt:((w=s.image)==null?void 0:w.alt)||""},null,8,oe)]))],10,ee)):(i(),r("div",{key:1,class:d(["article__image relative",{article__image__person:s.postType==="people"}])},[c.value?(i(),r("picture",re,[a("source",{media:"(min-width:768px)",srcset:s.image.sizes.desktop},null,8,le),a("img",{class:"w-full object-cover",src:s.image.sizes.mobile||s.image.src,alt:((k=s.image)==null?void 0:k.alt)||""},null,8,ce)])):(i(),r("picture",de,[a("source",{media:"(min-width:768px)",srcset:s.image.srcset},null,8,ue),a("img",{class:"w-full object-cover",src:(T=s.image)==null?void 0:T.src,alt:s.image.alt||""},null,8,ge)]))],2))],64)):p("",!0),L(O,{size:s.size||"small",static:!0,subheading:s.subheading,heading:s.heading,paragraph:s.paragraph,buttons:{items:s.buttons}},null,8,["size","subheading","heading","paragraph","buttons"])],2)}}},pe={class:"relative"},me={key:0,class:"article-grid grid gap-10 max-w-screen-2xl w-full my-0 mx-auto grid-cols-12"},he={class:"context w-full py-4"},be={class:"button-group flex flex-wrap gap-4 mt-4"},ye=["href"],ve={class:"btn__text"},xe=["href","aria-label"],_e=["srcset"],we=["src","alt"],ke={class:"mr-6 flex flex-col justify-start shrink-0"},ze={key:0,class:"text-12 text-azure text-group__subheading font-extended font-bold leading-130 tracking-8 uppercase"},$e=["innerHTML"],Ce={class:"button-group flex flex-wrap gap-4 mt-4"},Se=["onClick"],Ae={class:"btn__text"},We={key:0,class:"bg-indigo-200 text-indigo-800 text-14 border-[1px] border-indigo-500 flex flex-col mt-4 w-full",style:{maxHeight:"80vh"}},Me={class:"pt-4 pl-4 pr-4 flex w-full justify-end"},Te=["onClick"],Le=["innerHTML"],je={key:0,class:"px-4 pb-4 flex mt-auto justify-end"},Be=["href","target"],He=["onClick"],Ie=["innerHTML"],Re=["href","target"],De={__name:"ArticleGrid",props:{render_api:{type:Boolean,default:!1},posts:{type:String,default:""},api:{type:String,default:""},range:{type:Number,default:6},border:{type:[Boolean,String],default:!1},cta:{type:String,default:"Read Story"},columns:{type:Number,default:3},style:{type:String,default:""},size:{type:String,default:""},items:{type:Array,default:()=>[]}},setup(s){const t=s,W=C([]),c=C(null),_=E([]),M=E([]),h=C("auto"),f=C(t.columns),w=C(null),k=x(()=>t.columns===4?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":t.columns===3?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1 sm:grid-cols-2"),T=x(()=>t.columns===4?"md:col-span-2 col-span-4":t.columns===3?"md:col-span-3 col-span-9":"col-span-4"),z=x(()=>f.value===1),X=async()=>{if(!t.render_api)return;const n="https://news.colby.edu/wp-json/custom/v1/external-posts";try{const{data:l}=await Y.get(n),g=l.filter(e=>{var o,b,m;if(t.posts==="media_coverage"){if(!(((b=(o=e.story_type)==null?void 0:o[0])==null?void 0:b.slug)==="media-coverage"&&((m=e.content)==null?void 0:m.rendered)))return!1;if(t.api==="all_media")return!0;if(t.api==="president")return e.tags&&e.tags.some(y=>y.name==="president");if(t.api==="highlight")return e.tags&&e.tags.some(y=>y.name==="editors-pick")}return!1});W.value=g.map(e=>({title:{rendered:e.title.rendered.replace(/<(?!\/?(i|em)\b)[^>]+>/gi,"")},"post-meta-fields":{summary:[`${e.content.rendered.replace(/<(?!\/?(i|em)\b)[^>]+>/gi,"").substring(0,120)}...`]},url:e.external_url,image:e.image})).slice(0,t.range)}catch{}},j=()=>{const n=w.value;if(!n||!n.children.length)return;const l=n.children[0].offsetWidth,g=n.clientWidth,e=Math.floor(g/l)||1;e!==f.value?(f.value=e,c.value!==null&&(c.value=null,h.value="auto")):f.value=e,c.value!==null&&!z.value&&N(c.value)},B=n=>{c.value=c.value===n?null:n,Z(()=>{c.value!==null&&!z.value?N(c.value):h.value="auto"})},$=n=>z.value?"down":n%f.value<f.value/2?"right":"left",q=n=>{if(z.value)return{};const l=n%f.value,g="1.25rem";return l===0||l===f.value-1?{}:$(n)==="right"?{transform:`translateX(calc(-100% + -${g}))`,zIndex:10}:{transform:`translateX(calc(100% + ${g}))`,zIndex:10}},N=n=>{const l=_[n];if(!l)return;const g=l.offsetWidth,e=l.closest(".article-grid");if(!e)return;const m=e.clientWidth-g-16;h.value=`${m}px`},G=n=>{const l=_[n],g=M[n];return!l||!g?"auto":`${l.offsetHeight}px`};return P(async()=>{await X(),j(),window.addEventListener("resize",j)}),J(()=>{window.removeEventListener("resize",j)}),(n,l)=>{var g;return i(),r("div",pe,[t.render_api?(i(),r("div",me,[(i(!0),r(v,null,S(W.value,(e,o)=>(i(),r("div",{key:o,class:d(["article-grid__item glide__slide",{"col-span-12 md:col-span-6":t.columns===2,"col-span-12 md:col-span-6 lg:col-span-4":t.columns===3,"col-span-12 md:col-span-6 lg:col-span-3":t.columns===4}])},[a("article",{class:d(["article space-y-4",{"pt-1 border-t-2 border-solid border-indigo-600":t.border}])},[a("div",he,[L(U,{size:s.size,align:n.align,type:n.type,subheading:n.subheading,heading:n.heading,paragraph:n.paragraph,static:n.isStatic,hero:n.hero,date:n.date},null,8,["size","align","type","subheading","heading","paragraph","static","hero","date"]),a("div",be,[a("a",{class:"btn group inline-flex flex-row items-center space-x-1.5 rounded border border-solid border-indigo-300 font-body font-normal text-10 leading-130 text-indigo bg-indigo-100 hover:bg-indigo-200 focus:bg-indigo-200 focus:outline focus:outline-2 focus:outline-canary outline-offset-[-1px] py-1 px-3 transition-all duration-200 ease-in-out !no-underline",href:e.url},[a("span",ve,[K(A(t.cta)+" ",1),l[0]||(l[0]=a("div",{class:"btn__border block bg-indigo h-px w-0 group-hover:w-full transition-all duration-200 ease-in-out"},null,-1))])],8,ye)])])],2)],2))),128))])):p("",!0),!t.render_api&&t.style==="accordion"?(i(),r("div",{key:1,ref_key:"gridContainer",ref:w,class:d(["article-grid relative grid gap-10 max-w-screen-2xl w-full my-0 mx-auto",k.value])},[(i(!0),r(v,null,S(t.items,(e,o)=>{var b,m,H,y;return i(),r("div",{key:o,class:d(["relative",["article-grid__item transition-transform duration-500",c.value===o?"z-10 bg-white":"z-0"]]),style:D(c.value===o?q(o):{}),ref_for:!0,ref:u=>_[o]=u},[a("article",{class:d(["article space-y-4",{"pt-1 border-t-2 border-solid border-indigo-600":t.border}])},[(m=(b=e.image)==null?void 0:b.sizes)!=null&&m.desktop&&((y=(H=e.image)==null?void 0:H.sizes)!=null&&y.mobile)?(i(),r("a",{key:0,class:"article__image relative block overflow-hidden",href:e.url,"aria-label":e.heading},[a("picture",null,[a("source",{media:"(min-width: 768px)",srcset:e.image.sizes.desktop},null,8,_e),a("img",{decoding:"async",class:"w-full object-cover hover:scale-105 transition-all duration-500 ease-in-out",src:e.image.sizes.mobile,alt:e.title},null,8,we)])],8,xe)):p("",!0),a("div",{class:"context w-full space-y-5",ref_for:!0,ref:u=>M[o]=u},[L(U,{class:"text-group"},{default:R(()=>[a("div",ke,[e.heading&&e.subheading?(i(),r("div",ze,A(e.subheading),1)):p("",!0),a("h2",{class:d(["text-group__heading font-extended font-normal text-20 leading-110 -tracking-3 text-left text-indigo",{"lg:text-16":t.columns===4}]),innerHTML:e.heading},null,10,$e)])]),_:2},1024),a("div",Ce,[a("a",{class:"cursor-pointer btn group inline-flex flex-row items-center space-x-1.5 rounded border border-solid border-indigo-300 font-body font-normal text-10 leading-130 text-indigo bg-indigo-100 hover:bg-indigo-200 focus:bg-indigo-200 focus:outline focus:outline-2 focus:outline-canary outline-offset-[-1px] py-1 px-3 transition-all duration-200 ease-in-out !no-underline",onClick:u=>B(o)},[a("button",Ae,A(c.value===o?"Close":"Read More"),1)],8,Se)])],512)],2),z.value?(i(),V(F,{key:0,"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:R(()=>[c.value===o?(i(),r("div",We,[a("div",Me,[a("button",{onClick:u=>B(o)},[...l[1]||(l[1]=[a("span",{class:"material-icons-sharp text-indigo-800"},"close",-1)])],8,Te)]),a("div",{class:"text-group text-20 sm:text-18 md:text-20 lg:text-20 mb-4 p-4 flex-grow overflow-auto",innerHTML:e.paragraph},null,8,Le),Array.isArray(t.items[o].buttons)?(i(),r("div",je,[(i(!0),r(v,null,S(t.items[o].buttons,(u,I)=>(i(),r("a",{key:I,href:u.button.url,target:u.button.target||"_self",class:"cursor-pointer btn group inline-flex flex-row items-center space-x-1.5 rounded border border-solid border-indigo-300 font-body font-normal text-10 leading-130 text-indigo bg-indigo-100 hover:bg-indigo-200 focus:bg-indigo-200 focus:outline focus:outline-2 focus:outline-canary outline-offset-[-1px] py-1 px-3 transition-all duration-200 ease-in-out !no-underline ml-2"},A(u.button.title),9,Be))),128))])):p("",!0)])):p("",!0)]),_:2},1024)):(i(),V(F,{key:1,"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-300","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:R(()=>[c.value===o?(i(),r("div",{key:0,class:d(["absolute top-0 bg-indigo-200 text-indigo-800 text-14 border-[1px] border-indigo-500 flex flex-col",$(o)==="right"?"left-full ml-4":"right-full mr-4"]),style:D({width:h.value,height:G(o)})},[a("div",{class:d(["pt-4 pl-4 pr-4 flex w-full",$(o)==="left"?"justify-end":"justify-start"])},[a("button",{onClick:u=>B(o)},[...l[2]||(l[2]=[a("span",{class:"material-icons-sharp text-indigo-800"},"close",-1)])],8,He)],2),a("div",{class:"text-group sm:text-18 md:text-20 lg:text-20 mb-4 p-4 flex-grow overflow-auto",innerHTML:e.paragraph},null,8,Ie),Array.isArray(t.items[o].buttons)?(i(),r("div",{key:0,class:d(["px-4 pb-4 flex mt-auto",$(o)==="left"?"justify-start":"justify-end"])},[(i(!0),r(v,null,S(t.items[o].buttons,(u,I)=>(i(),r("a",{key:I,href:u.button.url,target:u.button.target||"_self",class:d(["cursor-pointer btn group inline-flex flex-row items-center space-x-1.5 rounded border border-solid border-indigo-300 font-body font-normal text-10 leading-130 text-indigo bg-indigo-100 hover:bg-indigo-200 focus:bg-indigo-200 focus:outline focus:outline-2 focus:outline-canary outline-offset-[-1px] py-1 px-3 transition-all duration-200 ease-in-out !no-underline",$(o)==="left"?"mr-2":"ml-2"])},A(u.button.title),11,Re))),128))],2)):p("",!0)],6)):p("",!0)]),_:2},1024))],6)}),128))],2)):p("",!0),!t.render_api&&s.style!=="accordion"?(i(),r("div",{key:2,class:d(["article-grid grid gap-10 max-w-screen-2xl w-full my-0 mx-auto",k.value])},[a("template",null,[(g=n.item)!=null&&g.heading?(i(!0),r(v,{key:0},S(s.items,(e,o)=>(i(),r("div",{key:o,class:d(["article-grid__item",T.value])},[L(fe,Q({ref_for:!0},e),null,16)],2))),128)):p("",!0)])],2)):p("",!0)])}}};export{De as default};
