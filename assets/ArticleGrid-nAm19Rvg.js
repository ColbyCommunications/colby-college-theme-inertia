import{r as m,g as U,c as W,h as te,i as ae,a as s,f as c,b as i,F as _,j as h,t as z,n as p,o as n,d as C,k as X,e as q,w as I,T as J,m as ne,l as se}from"./iframe-BhW3MJ0c.js";import{a as K}from"./index-B9ygI19o.js";import{_ as le}from"./TextGroup-DqdSnj46.js";import{_ as A}from"./Article-BX9cDSUP.js";const re={class:"relative"},oe={key:0},ie={class:"grid grid-cols-12 gap-10"},ue={key:1},de={class:"grid grid-cols-12 gap-10"},ce={key:2},pe={class:"grid grid-cols-12 gap-10"},ge={key:3,class:"mt-10 flex justify-center"},fe=["disabled"],me={class:"btn__text"},_e=["href","aria-label"],he=["srcset"],ye=["src","alt"],ve={class:"mr-6 flex shrink-0 flex-col justify-start"},be={key:0,class:"text-group__subheading font-extended text-12 leading-130 font-bold tracking-8 text-azure uppercase"},xe=["innerHTML"],we={class:"button-group mt-4 flex flex-wrap gap-4"},ke=["onClick"],ze={class:"btn__text"},Ce={key:0,class:"mt-4 flex w-full flex-col border-[1px] border-indigo-500 bg-indigo-200 text-14 text-indigo-800",style:{maxHeight:"80vh"}},Se={class:"flex w-full justify-end pt-4 pr-4 pl-4"},Me=["onClick"],Ve=["innerHTML"],We={key:0,class:"mt-auto flex justify-end px-4 pb-4"},Ae=["href","target"],Le=["onClick"],Ne=["innerHTML"],Pe=["href","target"],je=12,He={__name:"ArticleGrid",props:{display_posts_method:{type:String,default:"internal"},render_api:{type:Boolean,default:!1},api_source:{type:String,default:""},external_media_api:{type:String,default:""},range:{type:[Number,String],default:6},post_limit:{type:[Number,String],default:-1},size:{type:String,default:""},columns:{type:[Number,String],default:3},image_orientation:{type:String,default:""},border:{type:[Number,String],default:0},render_posts_category:{type:Number,default:1},cta:{type:String,default:"Read Story"},style:{type:String,default:""},items:{type:Array,default:()=>[]}},setup(y){const e=y,v=m([]),d=m(null),L=U([]),T=U([]),S=m("auto"),g=m(e.columns),$=m(null),N=m(1),R=m(1),b=m(!1),B=W(()=>e.columns===4?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":e.columns===3?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1 sm:grid-cols-2"),Q=W(()=>e.columns===4?"md:col-span-2 col-span-4":e.columns===3?"md:col-span-3 col-span-9":"col-span-4"),x=W(()=>g.value===1),E=W(()=>e.display_posts_method!=="internal"?!1:e.post_limit===-1?N.value<R.value:v.value.length<e.post_limit),D=async(l=1)=>{b.value=!0;let u=je;if(e.post_limit!==-1){const r=e.post_limit-v.value.length;if(u=Math.min(u,r),r<=0){b.value=!1;return}}const t="/wp-json/wp/v2/posts?categories="+e.render_posts_category+"&per_page="+u+"&page="+l+"&status=publish&_embed";let a=[];try{if(e.display_posts_method==="api"){const r="https://news.colby.edu/wp-json/custom/v1/external-posts",{data:f}=await K.get(r);a=f.filter(o=>{if(e.api_source!=="media_coverage"||!(o.story_type?.[0]?.slug==="media-coverage"&&o.content?.rendered))return!1;switch(e.external_media_api){case"all_media":return!0;case"president":return o.tags&&o.tags.some(V=>V.name==="president");case"highlight":return o.tags&&o.tags.some(V=>V.name==="editors-pick");default:return!1}}).map(o=>({title:{rendered:o.title.rendered.replace(/<(?!\/?(i|em)\b)[^>]+>/gi,"")},summary:[`${o.content.rendered.replace(/<(?!\/?(i|em)\b)[^>]+>/gi,"").substring(0,120)}...`],url:o.external_url,image:{src:o.image,alt:o.taxonomy?.[0]?.name||""}})).slice(0,e.range)}else if(e.display_posts_method==="internal"){const r=await K.get(t),f=r.data;if(l===1){const o=r.headers["x-wp-totalpages"];o&&(R.value=Number(o))}const M=f.map(o=>({title:o.title,date:Y(o.date),"post-meta-fields":{summary:(function(){const H=o.excerpt.rendered.replace(/<(?!\/?(i|em)\b)[^>]+>/gi,"").trim().substring(0,120)+(o.excerpt.rendered.length>120&&o.excerpt.rendered.trim().length>0?"...":"");if(H.length===0){const G=o.acf_blocks?.find(k=>k.name?.includes("paragraph")&&k.fields)?.fields?.paragraph_text;if(G){const k=G.replace(/<(?!\/?(i|em)\b)[^>]+>/gi,"").trim();return k.substring(0,120)+(k.length>120?"...":"")}return""}return H})()},url:o.link,image:{src:o.featured_img,alt:o._embedded?.["wp:featuredmedia"]?.[0]?.alt_text||""}}));a=[...v.value,...M],e.post_limit!==-1&&(a=a.slice(0,e.post_limit))}v.value=a}catch(r){console.error("Error fetching API data:",r)}finally{b.value=!1}};function Y(l){const u=new Date(l);return new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(u)}const Z=()=>{E.value&&!b.value&&(N.value++,D(N.value))},P=()=>{const l=$.value;if(!l||!l.children.length)return;const u=l.children[0].offsetWidth,t=l.clientWidth,a=Math.floor(t/u)||1;a!==g.value?(g.value=a,d.value!==null&&(d.value=null,S.value="auto")):g.value=a,d.value!==null&&!x.value&&F(d.value)},j=l=>{d.value=d.value===l?null:l,se(()=>{d.value!==null&&!x.value?F(d.value):S.value="auto"})},w=l=>x.value?"down":l%g.value<g.value/2?"right":"left",O=l=>{if(x.value)return{};const u=l%g.value,t="1.25rem";return u===0||u===g.value-1?{}:w(l)==="right"?{transform:`translateX(calc(-100% + -${t}))`,zIndex:10}:{transform:`translateX(calc(100% + ${t}))`,zIndex:10}},F=l=>{const u=L[l];if(!u)return;const t=u.offsetWidth,a=u.closest(".article-grid");if(!a)return;const M=a.clientWidth-t-16;S.value=`${M}px`},ee=l=>{const u=L[l],t=T[l];return!u||!t?"auto":`${u.offsetHeight}px`};return te(async()=>{await D(),P(),window.addEventListener("resize",P)}),ae(()=>{window.removeEventListener("resize",P)}),(l,u)=>(n(),s("div",re,[e.display_posts_method==="internal"?(n(),s("div",oe,[i("div",ie,[(n(!0),s(_,null,h(v.value,(t,a)=>(n(),s("div",{key:a,class:p(["article-grid__item glide__slide",{"col-span-12 md:col-span-6":e.columns===2,"col-span-12 md:col-span-6 lg:col-span-4":e.columns===3,"col-span-12 md:col-span-6 lg:col-span-3":e.columns===4}])},[C(A,{size:"small",image:t.image,subheading:t.date,heading:t.title.rendered,border:e.border,paragraph:t["post-meta-fields"].summary,buttons:[{button:{url:t.url,title:y.cta,type:"light",size:"small"}}],class:"pt-4"},null,8,["image","subheading","heading","border","paragraph","buttons"])],2))),128))])])):c("",!0),e.display_posts_method==="api"?(n(),s("div",ue,[i("div",de,[(n(!0),s(_,null,h(v.value,(t,a)=>(n(),s("div",{key:a,class:p(["article-grid__item glide__slide",{"col-span-12 md:col-span-6":e.columns===2,"col-span-12 md:col-span-6 lg:col-span-4":e.columns===3,"col-span-12 md:col-span-6 lg:col-span-3":e.columns===4}])},[C(A,{apiSource:e.api_source,size:e.size,image:t.image,heading:t.title.rendered,border:e.border,paragraph:t.summary,buttons:[{button:{url:t.url,title:y.cta,type:"light",size:"small"}}],class:"pt-4"},null,8,["apiSource","size","image","heading","border","paragraph","buttons"])],2))),128))])])):c("",!0),e.display_posts_method==="manual"?(n(),s("div",ce,[i("div",pe,[(n(!0),s(_,null,h(e.items,(t,a)=>(n(),s("div",{key:a,class:p(["article-grid__item glide__slide",{"col-span-12 md:col-span-6":e.columns===2,"col-span-12 md:col-span-6 lg:col-span-4":e.columns===3,"col-span-12 md:col-span-6 lg:col-span-3":e.columns===4}])},[C(A,{size:"small",image:t.image,subheading:t.subheading,heading:t.heading,border:e.border,paragraph:t.paragraph,buttons:[{button:{url:t.url,title:y.cta,type:"light",size:"small"}}],class:"pt-4"},null,8,["image","subheading","heading","border","paragraph","buttons"])],2))),128))])])):c("",!0),E.value?(n(),s("div",ge,[i("button",{onClick:Z,disabled:b.value,class:"btn group inline-flex cursor-pointer flex-row items-center space-x-1.5 rounded border border-solid border-indigo-600 bg-indigo-600 px-6 py-3 font-body text-14 leading-130 font-bold text-white !no-underline transition-all duration-200 ease-in-out hover:bg-indigo-700 disabled:opacity-50"},[i("span",me,z(b.value?"Loading...":"See More"),1)],8,fe)])):c("",!0),!e.render_api&&e.style==="accordion"?(n(),s("div",{key:4,ref_key:"gridContainer",ref:$,class:p(["article-grid relative mx-auto my-0 grid w-full max-w-screen-2xl gap-10",B.value])},[(n(!0),s(_,null,h(e.items,(t,a)=>(n(),s("div",{key:a,class:p(["relative",["article-grid__item transition-transform duration-500",d.value===a?"z-10 bg-white":"z-0"]]),style:X(d.value===a?O(a):{}),ref_for:!0,ref:r=>L[a]=r},[i("article",{class:p(["article space-y-4",{"border-t-2 border-solid border-indigo-600 pt-1":e.border}])},[t.image?.sizes?.desktop&&t.image?.sizes?.mobile?(n(),s("a",{key:0,class:"article__image relative block overflow-hidden",href:t.url,"aria-label":t.heading},[i("picture",null,[i("source",{media:"(min-width: 768px)",srcset:t.image.sizes.desktop},null,8,he),i("img",{decoding:"async",class:"w-full object-cover transition-all duration-500 ease-in-out hover:scale-105",src:t.image.sizes.mobile,alt:t.title},null,8,ye)])],8,_e)):c("",!0),i("div",{class:"context w-full space-y-5",ref_for:!0,ref:r=>T[a]=r},[C(le,{class:"text-group"},{default:I(()=>[i("div",ve,[t.heading&&t.subheading?(n(),s("div",be,z(t.subheading),1)):c("",!0),i("h2",{class:p(["text-group__heading -tracking-3 text-left font-extended text-20 leading-110 font-normal text-indigo",{"lg:text-16":e.columns===4}]),innerHTML:t.heading},null,10,xe)])]),_:2},1024),i("div",we,[i("a",{class:"btn group inline-flex cursor-pointer flex-row items-center space-x-1.5 rounded border border-solid border-indigo-300 bg-indigo-100 px-3 py-1 font-body text-10 leading-130 font-normal text-indigo !no-underline outline-offset-[-1px] transition-all duration-200 ease-in-out hover:bg-indigo-200 focus:bg-indigo-200 focus:outline focus:outline-2 focus:outline-canary",onClick:r=>j(a)},[i("button",ze,z(d.value===a?"Close":"Read More"),1)],8,ke)])],512)],2),x.value?(n(),q(J,{key:0,"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:I(()=>[d.value===a?(n(),s("div",Ce,[i("div",Se,[i("button",{onClick:r=>j(a)},[...u[0]||(u[0]=[i("span",{class:"material-icons-sharp text-indigo-800"},"close",-1)])],8,Me)]),i("div",{class:"text-group mb-4 flex-grow overflow-auto p-4 text-20 sm:text-18 md:text-20 lg:text-20",innerHTML:t.paragraph},null,8,Ve),Array.isArray(e.items[a].buttons)?(n(),s("div",We,[(n(!0),s(_,null,h(e.items[a].buttons,(r,f)=>(n(),s("a",{key:f,href:r.button.url,target:r.button.target||"_self",class:"btn group ml-2 inline-flex cursor-pointer flex-row items-center space-x-1.5 rounded border border-solid border-indigo-300 bg-indigo-100 px-3 py-1 font-body text-10 leading-130 font-normal text-indigo !no-underline outline-offset-[-1px] transition-all duration-200 ease-in-out hover:bg-indigo-200 focus:bg-indigo-200 focus:outline focus:outline-2 focus:outline-canary"},z(r.button.title),9,Ae))),128))])):c("",!0)])):c("",!0)]),_:2},1024)):(n(),q(J,{key:1,"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-300","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:I(()=>[d.value===a?(n(),s("div",{key:0,class:p(["absolute top-0 flex flex-col border-[1px] border-indigo-500 bg-indigo-200 text-14 text-indigo-800",w(a)==="right"?"left-full ml-4":"right-full mr-4"]),style:X({width:S.value,height:ee(a)})},[i("div",{class:p(["flex w-full pt-4 pr-4 pl-4",w(a)==="left"?"justify-end":"justify-start"])},[i("button",{onClick:r=>j(a)},[...u[1]||(u[1]=[i("span",{class:"material-icons-sharp text-indigo-800"},"close",-1)])],8,Le)],2),i("div",{class:"text-group mb-4 flex-grow overflow-auto p-4 sm:text-18 md:text-20 lg:text-20",innerHTML:t.paragraph},null,8,Ne),Array.isArray(e.items[a].buttons)?(n(),s("div",{key:0,class:p(["mt-auto flex px-4 pb-4",w(a)==="left"?"justify-start":"justify-end"])},[(n(!0),s(_,null,h(e.items[a].buttons,(r,f)=>(n(),s("a",{key:f,href:r.button.url,target:r.button.target||"_self",class:p(["btn group inline-flex cursor-pointer flex-row items-center space-x-1.5 rounded border border-solid border-indigo-300 bg-indigo-100 px-3 py-1 font-body text-10 leading-130 font-normal text-indigo !no-underline outline-offset-[-1px] transition-all duration-200 ease-in-out hover:bg-indigo-200 focus:bg-indigo-200 focus:outline focus:outline-2 focus:outline-canary",w(a)==="left"?"mr-2":"ml-2"])},z(r.button.title),11,Pe))),128))],2)):c("",!0)],6)):c("",!0)]),_:2},1024))],6))),128))],2)):c("",!0),!e.render_api&&y.style!=="accordion"?(n(),s("div",{key:5,class:p(["article-grid mx-auto my-0 grid w-full max-w-screen-2xl gap-10",B.value])},[i("template",null,[l.item?.heading?(n(!0),s(_,{key:0},h(y.items,(t,a)=>(n(),s("div",{key:a,class:p(["article-grid__item",Q.value])},[C(A,ne({ref_for:!0},t),null,16)],2))),128)):c("",!0)])],2)):c("",!0)]))}};He.__docgenInfo={exportName:"default",displayName:"ArticleGrid",description:"",tags:{},props:[{name:"display_posts_method",type:{name:"string"},defaultValue:{func:!1,value:'"internal"'}},{name:"render_api",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"api_source",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"external_media_api",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"range",type:{name:"number|string"},defaultValue:{func:!1,value:"6"}},{name:"post_limit",type:{name:"number|string"},defaultValue:{func:!1,value:"-1"}},{name:"size",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"columns",type:{name:"number|string"},defaultValue:{func:!1,value:"3"}},{name:"image_orientation",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"border",type:{name:"number|string"},defaultValue:{func:!1,value:"0"}},{name:"render_posts_category",type:{name:"number"},defaultValue:{func:!1,value:"1"}},{name:"cta",type:{name:"string"},defaultValue:{func:!1,value:'"Read Story"'}},{name:"style",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"items",type:{name:"array"},defaultValue:{func:!1,value:"[]"}}],sourceFiles:["/home/runner/work/colby-college-theme-inertia/colby-college-theme-inertia/resources/js/components/ArticleGrid/ArticleGrid.vue"]};export{He as _};
