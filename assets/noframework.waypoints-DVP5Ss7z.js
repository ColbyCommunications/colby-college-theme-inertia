(function(){var d=0,f={};function n(i){if(!i)throw new Error("No options passed to Waypoint constructor");if(!i.element)throw new Error("No element option passed to Waypoint constructor");if(!i.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+d,this.options=n.Adapter.extend({},n.defaults,i),this.element=this.options.element,this.adapter=new n.Adapter(this.element),this.callback=i.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=n.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=n.Context.findOrCreateByElement(this.options.context),n.offsetAliases[this.options.offset]&&(this.options.offset=n.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),f[this.key]=this,d+=1}n.prototype.queueTrigger=function(i){this.group.queueTrigger(this,i)},n.prototype.trigger=function(i){this.enabled&&this.callback&&this.callback.apply(this,i)},n.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete f[this.key]},n.prototype.disable=function(){return this.enabled=!1,this},n.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},n.prototype.next=function(){return this.group.next(this)},n.prototype.previous=function(){return this.group.previous(this)},n.invokeAll=function(i){var r=[];for(var e in f)r.push(f[e]);for(var t=0,o=r.length;t<o;t++)r[t][i]()},n.destroyAll=function(){n.invokeAll("destroy")},n.disableAll=function(){n.invokeAll("disable")},n.enableAll=function(){n.Context.refreshAll();for(var i in f)f[i].enabled=!0;return this},n.refreshAll=function(){n.Context.refreshAll()},n.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},n.viewportWidth=function(){return document.documentElement.clientWidth},n.adapters=[],n.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},n.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=n})();(function(){function d(t){window.setTimeout(t,1e3/60)}var f=0,n={},i=window.Waypoint,r=window.onload;function e(t){this.element=t,this.Adapter=i.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+f,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,n[t.waypointContextKey]=this,f+=1,i.windowContext||(i.windowContext=!0,i.windowContext=new e(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}e.prototype.add=function(t){var o=t.options.horizontal?"horizontal":"vertical";this.waypoints[o][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),o=this.Adapter.isEmptyObject(this.waypoints.vertical),l=this.element==this.element.window;t&&o&&!l&&(this.adapter.off(".waypoints"),delete n[this.key])},e.prototype.createThrottledResizeHandler=function(){var t=this;function o(){t.handleResize(),t.didResize=!1}this.adapter.on("resize.waypoints",function(){t.didResize||(t.didResize=!0,i.requestAnimationFrame(o))})},e.prototype.createThrottledScrollHandler=function(){var t=this;function o(){t.handleScroll(),t.didScroll=!1}this.adapter.on("scroll.waypoints",function(){(!t.didScroll||i.isTouch)&&(t.didScroll=!0,i.requestAnimationFrame(o))})},e.prototype.handleResize=function(){i.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},o={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var l in o){var s=o[l],h=s.newScroll>s.oldScroll,u=h?s.forward:s.backward;for(var y in this.waypoints[l]){var a=this.waypoints[l][y];if(a.triggerPoint!==null){var p=s.oldScroll<a.triggerPoint,c=s.newScroll>=a.triggerPoint,v=p&&c,g=!p&&!c;(v||g)&&(a.queueTrigger(u),t[a.group.id]=a.group)}}}for(var w in t)t[w].flushTriggers();this.oldScroll={x:o.horizontal.newScroll,y:o.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?i.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?i.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var o in this.waypoints)for(var l in this.waypoints[o])t.push(this.waypoints[o][l]);for(var s=0,h=t.length;s<h;s++)t[s].destroy()},e.prototype.refresh=function(){var t=this.element==this.element.window,o=t?void 0:this.adapter.offset(),l={},s;this.handleScroll(),s={horizontal:{contextOffset:t?0:o.left,contextScroll:t?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:t?0:o.top,contextScroll:t?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var h in s){var u=s[h];for(var y in this.waypoints[h]){var a=this.waypoints[h][y],p=a.options.offset,c=a.triggerPoint,v=0,g=c==null,w,m,x,A,S;a.element!==a.element.window&&(v=a.adapter.offset()[u.offsetProp]),typeof p=="function"?p=p.apply(a):typeof p=="string"&&(p=parseFloat(p),a.options.offset.indexOf("%")>-1&&(p=Math.ceil(u.contextDimension*p/100))),w=u.contextScroll-u.contextOffset,a.triggerPoint=Math.floor(v+w-p),m=c<u.oldScroll,x=a.triggerPoint>=u.oldScroll,A=m&&x,S=!m&&!x,!g&&A?(a.queueTrigger(u.backward),l[a.group.id]=a.group):(!g&&S||g&&u.oldScroll>=a.triggerPoint)&&(a.queueTrigger(u.forward),l[a.group.id]=a.group)}}return i.requestAnimationFrame(function(){for(var W in l)l[W].flushTriggers()}),this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in n)n[t].refresh()},e.findByElement=function(t){return n[t.waypointContextKey]},window.onload=function(){r&&r(),e.refreshAll()},i.requestAnimationFrame=function(t){var o=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||d;o.call(window,t)},i.Context=e})();(function(){function d(e,t){return e.triggerPoint-t.triggerPoint}function f(e,t){return t.triggerPoint-e.triggerPoint}var n={vertical:{},horizontal:{}},i=window.Waypoint;function r(e){this.name=e.name,this.axis=e.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),n[this.axis][this.name]=this}r.prototype.add=function(e){this.waypoints.push(e)},r.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},r.prototype.flushTriggers=function(){for(var e in this.triggerQueues){var t=this.triggerQueues[e],o=e==="up"||e==="left";t.sort(o?f:d);for(var l=0,s=t.length;l<s;l+=1){var h=t[l];(h.options.continuous||l===t.length-1)&&h.trigger([e])}}this.clearTriggerQueues()},r.prototype.next=function(e){this.waypoints.sort(d);var t=i.Adapter.inArray(e,this.waypoints),o=t===this.waypoints.length-1;return o?null:this.waypoints[t+1]},r.prototype.previous=function(e){this.waypoints.sort(d);var t=i.Adapter.inArray(e,this.waypoints);return t?this.waypoints[t-1]:null},r.prototype.queueTrigger=function(e,t){this.triggerQueues[t].push(e)},r.prototype.remove=function(e){var t=i.Adapter.inArray(e,this.waypoints);t>-1&&this.waypoints.splice(t,1)},r.prototype.first=function(){return this.waypoints[0]},r.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},r.findOrCreate=function(e){return n[e.axis][e.name]||new r(e)},i.Group=r})();(function(){var d=window.Waypoint;function f(r){return r===r.window}function n(r){return f(r)?r:r.defaultView}function i(r){this.element=r,this.handlers={}}i.prototype.innerHeight=function(){var r=f(this.element);return r?this.element.innerHeight:this.element.clientHeight},i.prototype.innerWidth=function(){var r=f(this.element);return r?this.element.innerWidth:this.element.clientWidth},i.prototype.off=function(r,e){function t(a,p,c){for(var v=0,g=p.length-1;v<g;v++){var w=p[v];(!c||c===w)&&a.removeEventListener(w)}}var o=r.split("."),l=o[0],s=o[1],h=this.element;if(s&&this.handlers[s]&&l)t(h,this.handlers[s][l],e),this.handlers[s][l]=[];else if(l)for(var u in this.handlers)t(h,this.handlers[u][l]||[],e),this.handlers[u][l]=[];else if(s&&this.handlers[s]){for(var y in this.handlers[s])t(h,this.handlers[s][y],e);this.handlers[s]={}}},i.prototype.offset=function(){if(!this.element.ownerDocument)return null;var r=this.element.ownerDocument.documentElement,e=n(this.element.ownerDocument),t={top:0,left:0};return this.element.getBoundingClientRect&&(t=this.element.getBoundingClientRect()),{top:t.top+e.pageYOffset-r.clientTop,left:t.left+e.pageXOffset-r.clientLeft}},i.prototype.on=function(r,e){var t=r.split("."),o=t[0],l=t[1]||"__default",s=this.handlers[l]=this.handlers[l]||{},h=s[o]=s[o]||[];h.push(e),this.element.addEventListener(o,e)},i.prototype.outerHeight=function(r){var e=this.innerHeight(),t;return r&&!f(this.element)&&(t=window.getComputedStyle(this.element),e+=parseInt(t.marginTop,10),e+=parseInt(t.marginBottom,10)),e},i.prototype.outerWidth=function(r){var e=this.innerWidth(),t;return r&&!f(this.element)&&(t=window.getComputedStyle(this.element),e+=parseInt(t.marginLeft,10),e+=parseInt(t.marginRight,10)),e},i.prototype.scrollLeft=function(){var r=n(this.element);return r?r.pageXOffset:this.element.scrollLeft},i.prototype.scrollTop=function(){var r=n(this.element);return r?r.pageYOffset:this.element.scrollTop},i.extend=function(){var r=Array.prototype.slice.call(arguments);function e(l,s){if(typeof l=="object"&&typeof s=="object")for(var h in s)s.hasOwnProperty(h)&&(l[h]=s[h]);return l}for(var t=1,o=r.length;t<o;t++)e(r[0],r[t]);return r[0]},i.inArray=function(r,e,t){return e==null?-1:e.indexOf(r,t)},i.isEmptyObject=function(r){for(var e in r)return!1;return!0},d.adapters.push({name:"noframework",Adapter:i}),d.Adapter=i})();
