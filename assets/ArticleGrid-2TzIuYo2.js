import{r as m,z as U,l as W,o as te,u as ae,c as s,m as c,a as u,F as _,b as h,t as C,n as p,d as n,e as x,j as X,h as q,w as H,T as J,p as ne,k as se}from"./iframe-BI_3ezP0.js";import{a as K}from"./index-B9ygI19o.js";import{_ as le}from"./TextGroup-8rV2ZAMN.js";import{_ as A}from"./Article-CX5YCELc.js";import{_ as re}from"./Picture-DioVXFI5.js";const oe={class:"relative"},ie={key:0},ue={class:"grid grid-cols-12 gap-10"},de={key:1},ce={class:"grid grid-cols-12 gap-10"},pe={key:2},ge={class:"grid grid-cols-12 gap-10"},fe={key:3,class:"mt-10 flex justify-center"},me=["disabled"],_e={class:"btn__text"},he=["href","aria-label"],ye={class:"mr-6 flex shrink-0 flex-col justify-start"},ve={key:0,class:"text-group__subheading font-extended text-12 leading-130 font-bold tracking-8 text-azure uppercase"},be=["innerHTML"],xe={class:"button-group mt-4 flex flex-wrap gap-4"},ke=["onClick"],we={class:"btn__text"},ze={key:0,class:"mt-4 flex w-full flex-col border-[1px] border-indigo-500 bg-indigo-200 text-14 text-indigo-800",style:{maxHeight:"80vh"}},Ce={class:"flex w-full justify-end pt-4 pr-4 pl-4"},Se=["onClick"],Me=["innerHTML"],Ve={key:0,class:"mt-auto flex justify-end px-4 pb-4"},We=["href","target"],Ae=["onClick"],Le=["innerHTML"],Ne=["href","target"],Pe=12,$e={__name:"ArticleGrid",props:{display_posts_method:{type:String,default:"internal"},render_api:{type:Boolean,default:!1},api_source:{type:String,default:""},external_media_api:{type:String,default:""},range:{type:[Number,String],default:6},post_limit:{type:[Number,String],default:-1},size:{type:String,default:""},columns:{type:[Number,String],default:3},image_orientation:{type:String,default:""},border:{type:[Number,String],default:0},render_posts_category:{type:Number,default:1},cta:{type:String,default:"Read Story"},style:{type:String,default:""},items:{type:Array,default:()=>[]}},setup(y){const e=y,v=m([]),d=m(null),L=U([]),I=U([]),S=m("auto"),g=m(e.columns),T=m(null),N=m(1),R=m(1),b=m(!1),B=W(()=>e.columns===4?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":e.columns===3?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1 sm:grid-cols-2"),Q=W(()=>e.columns===4?"md:col-span-2 col-span-4":e.columns===3?"md:col-span-3 col-span-9":"col-span-4"),k=W(()=>g.value===1),E=W(()=>e.display_posts_method!=="internal"?!1:e.post_limit===-1?N.value<R.value:v.value.length<e.post_limit),D=async(l=1)=>{b.value=!0;let i=Pe;if(e.post_limit!==-1){const r=e.post_limit-v.value.length;if(i=Math.min(i,r),r<=0){b.value=!1;return}}const t="/wp-json/wp/v2/posts?categories="+e.render_posts_category+"&per_page="+i+"&page="+l+"&status=publish&_embed";let a=[];try{if(e.display_posts_method==="api"){const r="https://news.colby.edu/wp-json/custom/v1/external-posts",{data:f}=await K.get(r);a=f.filter(o=>{if(e.api_source!=="media_coverage"||!(o.story_type?.[0]?.slug==="media-coverage"&&o.content?.rendered))return!1;switch(e.external_media_api){case"all_media":return!0;case"president":return o.tags&&o.tags.some(V=>V.name==="president");case"highlight":return o.tags&&o.tags.some(V=>V.name==="editors-pick");default:return!1}}).map(o=>({title:{rendered:o.title.rendered.replace(/<(?!\/?(i|em)\b)[^>]+>/gi,"")},summary:[`${o.content.rendered.replace(/<(?!\/?(i|em)\b)[^>]+>/gi,"").substring(0,120)}...`],url:o.external_url,image:{src:o.image,alt:o.taxonomy?.[0]?.name||""}})).slice(0,e.range)}else if(e.display_posts_method==="internal"){const r=await K.get(t),f=r.data;if(l===1){const o=r.headers["x-wp-totalpages"];o&&(R.value=Number(o))}const M=f.map(o=>({title:o.title,date:Y(o.date),"post-meta-fields":{summary:(function(){const j=o.excerpt.rendered.replace(/<(?!\/?(i|em)\b)[^>]+>/gi,"").trim().substring(0,120)+(o.excerpt.rendered.length>120&&o.excerpt.rendered.trim().length>0?"...":"");if(j.length===0){const G=o.acf_blocks?.find(z=>z.name?.includes("paragraph")&&z.fields)?.fields?.paragraph_text;if(G){const z=G.replace(/<(?!\/?(i|em)\b)[^>]+>/gi,"").trim();return z.substring(0,120)+(z.length>120?"...":"")}return""}return j})()},url:o.link,image:{src:o.featured_img,alt:o._embedded?.["wp:featuredmedia"]?.[0]?.alt_text||""}}));a=[...v.value,...M],e.post_limit!==-1&&(a=a.slice(0,e.post_limit))}v.value=a}catch(r){console.error("Error fetching API data:",r)}finally{b.value=!1}};function Y(l){const i=new Date(l);return new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(i)}const Z=()=>{E.value&&!b.value&&(N.value++,D(N.value))},P=()=>{const l=T.value;if(!l||!l.children.length)return;const i=l.children[0].offsetWidth,t=l.clientWidth,a=Math.floor(t/i)||1;a!==g.value?(g.value=a,d.value!==null&&(d.value=null,S.value="auto")):g.value=a,d.value!==null&&!k.value&&F(d.value)},$=l=>{d.value=d.value===l?null:l,se(()=>{d.value!==null&&!k.value?F(d.value):S.value="auto"})},w=l=>k.value?"down":l%g.value<g.value/2?"right":"left",O=l=>{if(k.value)return{};const i=l%g.value,t="1.25rem";return i===0||i===g.value-1?{}:w(l)==="right"?{transform:`translateX(calc(-100% + -${t}))`,zIndex:10}:{transform:`translateX(calc(100% + ${t}))`,zIndex:10}},F=l=>{const i=L[l];if(!i)return;const t=i.offsetWidth,a=i.closest(".article-grid");if(!a)return;const M=a.clientWidth-t-16;S.value=`${M}px`},ee=l=>{const i=L[l],t=I[l];return!i||!t?"auto":`${i.offsetHeight}px`};return te(async()=>{await D(),P(),window.addEventListener("resize",P)}),ae(()=>{window.removeEventListener("resize",P)}),(l,i)=>(n(),s("div",oe,[e.display_posts_method==="internal"?(n(),s("div",ie,[u("div",ue,[(n(!0),s(_,null,h(v.value,(t,a)=>(n(),s("div",{key:a,class:p(["article-grid__item glide__slide",{"col-span-12 md:col-span-6":e.columns===2,"col-span-12 md:col-span-6 lg:col-span-4":e.columns===3,"col-span-12 md:col-span-6 lg:col-span-3":e.columns===4}])},[x(A,{size:"small",image:t.image,subheading:t.date,heading:t.title.rendered,border:e.border,paragraph:t["post-meta-fields"].summary,buttons:[{button:{url:t.url,title:y.cta,type:"light",size:"small"}}],class:"pt-4"},null,8,["image","subheading","heading","border","paragraph","buttons"])],2))),128))])])):c("",!0),e.display_posts_method==="api"?(n(),s("div",de,[u("div",ce,[(n(!0),s(_,null,h(v.value,(t,a)=>(n(),s("div",{key:a,class:p(["article-grid__item glide__slide",{"col-span-12 md:col-span-6":e.columns===2,"col-span-12 md:col-span-6 lg:col-span-4":e.columns===3,"col-span-12 md:col-span-6 lg:col-span-3":e.columns===4}])},[x(A,{apiSource:e.api_source,size:e.size,image:t.image,heading:t.title.rendered,border:e.border,paragraph:t.summary,buttons:[{button:{url:t.url,title:y.cta,type:"light",size:"small"}}],class:"pt-4"},null,8,["apiSource","size","image","heading","border","paragraph","buttons"])],2))),128))])])):c("",!0),e.display_posts_method==="manual"?(n(),s("div",pe,[u("div",ge,[(n(!0),s(_,null,h(e.items,(t,a)=>(n(),s("div",{key:a,class:p(["article-grid__item glide__slide",{"col-span-12 md:col-span-6":e.columns===2,"col-span-12 md:col-span-6 lg:col-span-4":e.columns===3,"col-span-12 md:col-span-6 lg:col-span-3":e.columns===4}])},[x(A,{size:"small",image:t.image,subheading:t.subheading,heading:t.heading,border:e.border,paragraph:t.paragraph,buttons:[{button:{url:t.url,title:y.cta,type:"light",size:"small"}}],class:"pt-4"},null,8,["image","subheading","heading","border","paragraph","buttons"])],2))),128))])])):c("",!0),E.value?(n(),s("div",fe,[u("button",{onClick:Z,disabled:b.value,class:"btn group inline-flex cursor-pointer flex-row items-center space-x-1.5 rounded border border-solid border-indigo-600 bg-indigo-600 px-6 py-3 font-body text-14 leading-130 font-bold text-white !no-underline transition-all duration-200 ease-in-out hover:bg-indigo-700 disabled:opacity-50"},[u("span",_e,C(b.value?"Loading...":"See More"),1)],8,me)])):c("",!0),!e.render_api&&e.style==="accordion"?(n(),s("div",{key:4,ref_key:"gridContainer",ref:T,class:p(["article-grid relative mx-auto my-0 grid w-full max-w-screen-2xl gap-10",B.value])},[(n(!0),s(_,null,h(e.items,(t,a)=>(n(),s("div",{key:a,class:p(["relative",["article-grid__item transition-transform duration-500",d.value===a?"z-10 bg-white":"z-0"]]),style:X(d.value===a?O(a):{}),ref_for:!0,ref:r=>L[a]=r},[u("article",{class:p(["article space-y-4",{"border-t-2 border-solid border-indigo-600 pt-1":e.border}])},[t.image?.sizes?.desktop&&t.image?.sizes?.mobile?(n(),s("a",{key:0,class:"article__image relative block overflow-hidden",href:t.url,"aria-label":t.heading},[x(re,{class:"w-full object-cover transition-all duration-500 ease-in-out hover:scale-105","size-desktop":t.image.sizes.desktop,"size-mobile":t.image.sizes.mobile,alt:t.title},null,8,["size-desktop","size-mobile","alt"])],8,he)):c("",!0),u("div",{class:"context w-full space-y-5",ref_for:!0,ref:r=>I[a]=r},[x(le,{class:"text-group"},{default:H(()=>[u("div",ye,[t.heading&&t.subheading?(n(),s("div",ve,C(t.subheading),1)):c("",!0),u("h2",{class:p(["text-group__heading -tracking-3 text-left font-extended text-20 leading-110 font-normal text-indigo",{"lg:text-16":e.columns===4}]),innerHTML:t.heading},null,10,be)])]),_:2},1024),u("div",xe,[u("a",{class:"btn group inline-flex cursor-pointer flex-row items-center space-x-1.5 rounded border border-solid border-indigo-300 bg-indigo-100 px-3 py-1 font-body text-10 leading-130 font-normal text-indigo !no-underline outline-offset-[-1px] transition-all duration-200 ease-in-out hover:bg-indigo-200 focus:bg-indigo-200 focus:outline focus:outline-2 focus:outline-canary",onClick:r=>$(a)},[u("button",we,C(d.value===a?"Close":"Read More"),1)],8,ke)])],512)],2),k.value?(n(),q(J,{key:0,"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:H(()=>[d.value===a?(n(),s("div",ze,[u("div",Ce,[u("button",{onClick:r=>$(a)},[...i[0]||(i[0]=[u("span",{class:"material-icons-sharp text-indigo-800"},"close",-1)])],8,Se)]),u("div",{class:"text-group mb-4 flex-grow overflow-auto p-4 text-20 sm:text-18 md:text-20 lg:text-20",innerHTML:t.paragraph},null,8,Me),Array.isArray(e.items[a].buttons)?(n(),s("div",Ve,[(n(!0),s(_,null,h(e.items[a].buttons,(r,f)=>(n(),s("a",{key:f,href:r.button.url,target:r.button.target||"_self",class:"btn group ml-2 inline-flex cursor-pointer flex-row items-center space-x-1.5 rounded border border-solid border-indigo-300 bg-indigo-100 px-3 py-1 font-body text-10 leading-130 font-normal text-indigo !no-underline outline-offset-[-1px] transition-all duration-200 ease-in-out hover:bg-indigo-200 focus:bg-indigo-200 focus:outline focus:outline-2 focus:outline-canary"},C(r.button.title),9,We))),128))])):c("",!0)])):c("",!0)]),_:2},1024)):(n(),q(J,{key:1,"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-300","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:H(()=>[d.value===a?(n(),s("div",{key:0,class:p(["absolute top-0 flex flex-col border-[1px] border-indigo-500 bg-indigo-200 text-14 text-indigo-800",w(a)==="right"?"left-full ml-4":"right-full mr-4"]),style:X({width:S.value,height:ee(a)})},[u("div",{class:p(["flex w-full pt-4 pr-4 pl-4",w(a)==="left"?"justify-end":"justify-start"])},[u("button",{onClick:r=>$(a)},[...i[1]||(i[1]=[u("span",{class:"material-icons-sharp text-indigo-800"},"close",-1)])],8,Ae)],2),u("div",{class:"text-group mb-4 flex-grow overflow-auto p-4 sm:text-18 md:text-20 lg:text-20",innerHTML:t.paragraph},null,8,Le),Array.isArray(e.items[a].buttons)?(n(),s("div",{key:0,class:p(["mt-auto flex px-4 pb-4",w(a)==="left"?"justify-start":"justify-end"])},[(n(!0),s(_,null,h(e.items[a].buttons,(r,f)=>(n(),s("a",{key:f,href:r.button.url,target:r.button.target||"_self",class:p(["btn group inline-flex cursor-pointer flex-row items-center space-x-1.5 rounded border border-solid border-indigo-300 bg-indigo-100 px-3 py-1 font-body text-10 leading-130 font-normal text-indigo !no-underline outline-offset-[-1px] transition-all duration-200 ease-in-out hover:bg-indigo-200 focus:bg-indigo-200 focus:outline focus:outline-2 focus:outline-canary",w(a)==="left"?"mr-2":"ml-2"])},C(r.button.title),11,Ne))),128))],2)):c("",!0)],6)):c("",!0)]),_:2},1024))],6))),128))],2)):c("",!0),!e.render_api&&y.style!=="accordion"?(n(),s("div",{key:5,class:p(["article-grid mx-auto my-0 grid w-full max-w-screen-2xl gap-10",B.value])},[u("template",null,[l.item?.heading?(n(!0),s(_,{key:0},h(y.items,(t,a)=>(n(),s("div",{key:a,class:p(["article-grid__item",Q.value])},[x(A,ne({ref_for:!0},t),null,16)],2))),128)):c("",!0)])],2)):c("",!0)]))}};$e.__docgenInfo={exportName:"default",displayName:"ArticleGrid",description:"",tags:{},props:[{name:"display_posts_method",type:{name:"string"},defaultValue:{func:!1,value:'"internal"'}},{name:"render_api",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"api_source",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"external_media_api",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"range",type:{name:"number|string"},defaultValue:{func:!1,value:"6"}},{name:"post_limit",type:{name:"number|string"},defaultValue:{func:!1,value:"-1"}},{name:"size",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"columns",type:{name:"number|string"},defaultValue:{func:!1,value:"3"}},{name:"image_orientation",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"border",type:{name:"number|string"},defaultValue:{func:!1,value:"0"}},{name:"render_posts_category",type:{name:"number"},defaultValue:{func:!1,value:"1"}},{name:"cta",type:{name:"string"},defaultValue:{func:!1,value:'"Read Story"'}},{name:"style",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"items",type:{name:"array"},defaultValue:{func:!1,value:"[]"}}],sourceFiles:["/home/runner/work/colby-college-theme-inertia/colby-college-theme-inertia/resources/js/components/ArticleGrid/ArticleGrid.vue"]};export{$e as _};
